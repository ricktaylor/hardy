[package]
name = "hardy-bpa-fuzz"
version = "0.0.0"
publish = false
edition.workspace = true

[package.metadata]
cargo-fuzz = true

[features]
default = []
sqlite-storage = ["dep:hardy-sqlite-storage"]
localdisk-storage = ["dep:hardy-localdisk-storage"]
coverage = ["hardy-bpa/coverage","hardy-sqlite-storage/coverage","hardy-localdisk-storage/coverage"]

[dependencies]
libfuzzer-sys = "0.4"
hardy-otel = { path = "../../otel" }
hardy-bpv7 = { path = "../../bpv7" }
hardy-bpa = { path = ".." }
hardy-sqlite-storage = { path = "../../sqlite-storage", optional = true }
hardy-localdisk-storage = { path = "../../localdisk-storage", optional = true }
tokio = { version = "1.45.0", features = ["rt-multi-thread", "time"] }
time = { version = "0.3.41", features = ["parsing"] }
tracing = "0.1.41"
tracing-subscriber = "0.3.19"
tracing-log = "0.2.0"
arbitrary = { version = "1.4.2", features = ["derive"] }
cfg-if = "1.0.1"

[lib]
name = "common"
path = "src/lib.rs"
test = true

[[bin]]
name = "cla"
path = "fuzz_targets/cla.rs"
test = false
bench = false

[[bin]]
name = "service"
path = "fuzz_targets/service.rs"
test = false
bench = false
